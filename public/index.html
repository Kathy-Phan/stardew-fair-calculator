<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grange Fair Score Calculator</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="modal.css">
    
</head>
<body>
    <div id="app">
        <div class="card-container">
            <h1>Stardew Valley Grange Fair Calculator</h1>
            <p>This is a <b>fan-made</b> calculator, built to simplify calculating points in the Grange Display for the <i>Stardew Valley Fair</i>. </p>
            <br>

            <!-- Search Bar -->
            <div class="search-bar">
                <div class="row">
                    <img src="images/search-icon.png" alt="search icon" class="search-icon">
                    <input type="text" id="input-box" placeholder="Search items..." autocomplete="off" v-model="searchTerm">
                    <ul id="item-list"></ul>
                </div>
            </div>

            <!-- Info -->
            <p>Here's how the Grange Display works:</p>
            <div class="description">Bring <b>up to</b> 9 items to put into the display. The display will be graded by the quality and diversity of the items.
                You will be rewarded with star tokens <img src="images/silver.png"> which can be used in Pierre's stand. 
                The display is shared in multiplayer but you must claim the prize <b>individually</b> by talking to Mayor Lewis.</div>
            
            <p>Tips:</p>
            <p>You can enter the competition first, then explore the fair to spend your newly earned star tokens.</p>
            <p>(We made the mistake of grinding for star tokens before entering the competition.)</p>
            

            <!-- Modal -->
            <!-- <div class="modal-container">
                <button class="close-btn">x</button>
                <div class="modal">
                    <h3>Selected Items: ({{ selectedItems.length }}/9)</h3>
                    <button @click="clearAll">Clear All</button>
                    <div>
                        <div id="selected-items-container">
                            <p id="no-items">No items selected yet</p>
                        </div>
                        <div v-for="item in selectedItems" :key="item.id">
                            <div>
                                <span class="item-name">{{ item.name }}&nbsp;</span>
                                <img v-if="item.quality !== 'normal'" :src="'images/' + item.quality + '.png'">
                                <span class="item-quality"></span>
                                <span>{{ item.points ?? 0 }}pts</span>
                                <button @click="removeItem(item.id)">
                                    <img id="bin" src="images/bin.png">
                                </button>
                            </div>
                        </div>
                    </div>
            

                    <h2>Current Score</h2>
                    
                    --------------------------------
                    <div>
                        <span>Base Points: {{ score.base }}</span>
                    </div>

                    <div>
                        <span>Unique Categories ({{ getUniqueCategories().length }}/6): {{ score.category }}</span>
                    </div>

                    <div>
                        <span>Item Points: {{ score.sumItems }}</span>
                    </div>

                    <div>
                        <span>Total Score: {{ score.total }}</span>
                    </div>

                </div>
            </div> -->

            
        </div>
        
        <div class="bottom-card">
            <!-- Profession Tabs -->
            <div class="professions">
                <h3>Select Your Professions:</h3>
                <p>Having certain skills grants extra points for specific items</p>
                <div class="profession-tabs">
                    <button
                        v-for="prof in ['Base', 'Rancher', 'Mastery', 'Tapper', 'Tiller', 'Artisan', 'Fisher', 'Angler', 'Knowledge', 'Tiller+Knowledge', 'Gemologist']"
                        :key="prof"
                        @click="profession = prof"
                        :class="['item-profession', prof]"
                    >
                        <div v-if="prof === 'Tiller+Knowledge'" class="tiller_knowledge">
                            <img src="images/professions/tiller.png" class="tiller_img">
                            <h2>+</h2>
                            <img src="images/professions/knowledge.png" class="knowledge_img">
                        </div>
                        
                        <img v-else :src="prof == 'Base' ? 'images/stop.svg' : 'images/professions/' + prof.toLowerCase() + '.png'" class="profession-image">
                        
                        {{ prof === 'Base' ? 'None' : prof }}
                    </button>
                </div>
            </div>

            <!-- Category Tabs -->
            <div class="category-tabs">
                <button
                    v-for="(category, index) in categories"
                    :key="index"
                    @click="activeTab = index"
                    :class="[{ active: activeTab == index }, category.category]"
                >
                {{ category.category }}
                </button>
            </div>

            <div class="stardew-items">
                <span v-if="filterItems.length == 0">No items</span>
                <div
                    v-for="(item, index) in filterItems"
                    :key="index"
                >
                    <div class="item-card">
                        <div class="item-image-and-name-container">
                            <div class="item-and-overlay-container">
                                <!-- Item Image -->
                                <img 
                                    v-if="item.image" 
                                    :src="item.image" 
                                    :alt="item.name" 
                                    class="item-image"
                                >
                                
                                <!-- Item image overlay for Artisan Goods -->
                                <img
                                    v-if="categories[activeTab].category == 'Artisan Good' || 'All'"
                                    :src="getOverlayImage(item.name)"
                                    class="overlay-image"
                                >
                                
                            </div>

                            <div class="item-name-and-prof-container">
                                <!-- Item name in card -->
                                <span 
                                    class="item-name">
                                    {{ item.name }}
                                </span>

                                <!-- Profession name in card -->
                                <div 
                                    v-if="item.type !== 'Base'"
                                    :class="['item-profession', item.type.toLowerCase()]"
                                >
                                    {{ item.type }}
                                </div>
                            </div>
                        </div>
                        
                        <div class="points-btn-container">
                            <button
                                v-for="(points, quality) in item.quality"
                                :key="quality"
                                @click="addItem(item, quality, categories[activeTab])"
                                :disabled="selectedItems.length >= 9"
                            >
                                <div class="item-star-container">
                                    <img 
                                        :src="quality !== 'normal' ? 'images/' + quality + '.png' : 'images/stop.svg'"
                                        class="quality-image"
                                    />
                                </div>
                                <div>{{ points ?? 0 }}pts</div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="script.js"></script>
</body>
</html>
